<!DOCTYPE html>
<html>

<head>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
        }
    </style>
</head>

<body>

    <h1>The thead, tbody, and tfoot elements</h1>

    <table id="dataTable">
        <thead>
            <tr>
                <th>id</th>
                <th>e</th>
                <th>n</th>
                <th>s</th>
                <th>i1</th>
                <th>i2</th>
                <th>i3</th>
                <th>i4</th>
                <th>i5</th>
                <th>i6</th>
                <th>i7</th>
                <th>i8</th>
                <th>i9</th>
                <th>i10</th>
                <th>i11</th>
                <th>i12</th>
                <th>i13</th>
                <th>i14</th>
                <th>i15</th>
                <th>i16</th>
                <th>i17</th>
                <th>i18</th>
                <th>i19</th>
                <th>i20</th>
                <th>i21</th>
                <th>iltt</th>
                <th>ix</th>
                <th>stn</th>
                <th>si1</th>
                <th>si2</th>
                <th>si3</th>
                <th>si4</th>
                <th>si5</th>
                <th>si6</th>
                <th>si7</th>
                <th>si8</th>
                <th>si9</th>
                <th>si10</th>
                <th>si11</th>
                <th>si12</th>
                <th>si13</th>
                <th>si14</th>
                <th>si15</th>
                <th>si16</th>
                <th>si17</th>
                <th>si18</th>
                <th>si19</th>
                <th>si20</th>
                <th>si21</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dynamic Data render here -->
        </tbody>
    </table>
    <script>
        var ws = new WebSocket('ws://localhost:40511');

        ws.onopen = function () {
            console.log('websocket is connected ...')
            ws.send('connected')
        }

        ws.onmessage = function (ev) {
            const data = JSON.parse(ev.data);
            updateTable(data);
            // setInterval(
            //     () => {
            //         updateTable(data);
            //     },
            //     3000
            // )
            console.log(ev);
        }
        function updateTable(data) {
            const tableBody = document.querySelector('#dataTable tbody');
            tableBody.innerHTML = '';

            data.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
          <td>${item.id}</td>
          <td>${item.e}</td>
          <td>${item.n}</td>
          <td>${item.s}</td>
          <td>${item.i1}</td>
          <td>${item.i2}</td>
          <td>${item.i3}</td>
          <td>${item.i4}</td>
          <td>${item.i5}</td>
          <td>${item.i6}</td>
          <td>${item.i7}</td>
          <td>${item.i8}</td>
          <td>${item.i9}</td>
          <td>${item.i10}</td>
          <td>${item.i11}</td>
          <td>${item.i12}</td>
          <td>${item.i13}</td>
          <td>${item.i14}</td>
          <td>${item.i15}</td>
          <td>${item.i16}</td>
          <td>${item.i17}</td>
          <td>${item.i18}</td>
          <td>${item.i19}</td>
          <td>${item.i20}</td>
          <td>${item.i21}</td>
          <td>${item.iltt}</td>
          <td>${item.ix}</td>
          <td>${item.stn}</td>
          <td>${item.si1}</td>
          <td>${item.si2}</td>
          <td>${item.si3}</td>
          <td>${item.si4}</td>
          <td>${item.si5}</td>
          <td>${item.si6}</td>
          <td>${item.si7}</td>
          <td>${item.si8}</td>
          <td>${item.si9}</td>
          <td>${item.si10}</td>
          <td>${item.si11}</td>
          <td>${item.si12}</td>
          <td>${item.si13}</td>
          <td>${item.si14}</td>
          <td>${item.si15}</td>
          <td>${item.si16}</td>
          <td>${item.si17}</td>
          <td>${item.si18}</td>
          <td>${item.si19}</td>
          <td>${item.si20}</td>
          <td>${item.si21}</td>

          <!-- Add more columns as needed -->
        `;
                tableBody.appendChild(row);
            });
        }
    </script>
</body>

</html>